# ì£¼ê°„ ë­í‚¹ â€” ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

> **ìµœì¢… ê°±ì‹ **: 2026-01-30  
> **ì—­í• **: ë­í‚¹ ê¸°ëŠ¥ì˜ **ë‹¨ì¼ ì§„ì‹¤(SoT)**  
> **ìš°ì„ ìˆœìœ„**: Next (MVP ì™„ë£Œ í›„)

---

## 1) ëª©ì  / ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

### 1.1 ëª©ì 
- ê²½ìŸ ìš”ì†Œë¥¼ í†µí•´ ì‚¬ìš©ì ìœ ì§€ìœ¨ê³¼ ì¬ë°©ë¬¸ìœ¨ í–¥ìƒ
- ìŠ¤ëƒ…ìƒ· ë°©ì‹ìœ¼ë¡œ DB ë¶€í•˜ ìµœì†Œí™” ë° ê³µì •ì„± í™•ë³´
- ì£¼ê°„/ì¼ê°„/ì›”ê°„ ë­í‚¹ìœ¼ë¡œ ë‹¤ì–‘í•œ ëª©í‘œ ì œê³µ

### 1.2 ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

| # | ì‹œë‚˜ë¦¬ì˜¤ | ì„¤ëª… |
|---|----------|------|
| 1 | ë­í‚¹ ì¡°íšŒ | ì‚¬ìš©ìê°€ LeaderboardPageì—ì„œ ì£¼ê°„ Top 100 í™•ì¸ |
| 2 | ë‚´ ìˆœìœ„ í™•ì¸ | ë¡œê·¸ì¸ ì‚¬ìš©ìê°€ ìì‹ ì˜ ìˆœìœ„ì™€ ì£¼ë³€ ë­ì»¤ í™•ì¸ |
| 3 | ë­í‚¹ ì§„ì… ë™ê¸° | "ë‚´ê°€ ëª‡ ë“±ì¸ì§€" í‘œì‹œë¡œ ê²½ìŸ ë™ê¸° ë¶€ì—¬ |
| 4 | ì–¸ì–´ë³„ ë­í‚¹ | í•œê¸€/ì˜ì–´ ë³„ë„ ë­í‚¹ìœ¼ë¡œ ê³µì •ì„± í™•ë³´ |
| 5 | ê¸°ê°„ë³„ ë­í‚¹ | ì¼ê°„/ì£¼ê°„/ì›”ê°„ íƒ­ìœ¼ë¡œ ë‹¤ì–‘í•œ ëª©í‘œ ì œê³µ |

---

## 2) í™”ë©´(UX) êµ¬ì„±

### 2.1 LeaderboardPage (ì‹ ê·œ í˜ì´ì§€)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† ì£¼ê°„ ë­í‚¹                              [ì¼ê°„|ì£¼ê°„|ì›”ê°„]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì–¸ì–´: [í•œê¸€|ì˜ì–´]                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¥‡ 1ìœ„  user_123       WPM 456.7   ì •í™•ë„ 99.2%  â”‚  â”‚
â”‚  â”‚ ğŸ¥ˆ 2ìœ„  speed_master   WPM 445.3   ì •í™•ë„ 98.8%  â”‚  â”‚
â”‚  â”‚ ğŸ¥‰ 3ìœ„  typing_pro     WPM 432.1   ì •í™•ë„ 99.5%  â”‚  â”‚
â”‚  â”‚    4ìœ„  ...                                          â”‚  â”‚
â”‚  â”‚    5ìœ„  ...                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ ë‚´ ìˆœìœ„: 42ìœ„ (WPM 312.5, ì •í™•ë„ 96.3%)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   40ìœ„  nearby_user1   WPM 315.2   ì •í™•ë„ 97.1%  â”‚  â”‚
â”‚  â”‚   41ìœ„  nearby_user2   WPM 313.8   ì •í™•ë„ 96.8%  â”‚  â”‚
â”‚  â”‚ â–¶ 42ìœ„  ë‚˜              WPM 312.5   ì •í™•ë„ 96.3%  â”‚  â”‚
â”‚  â”‚   43ìœ„  nearby_user3   WPM 310.2   ì •í™•ë„ 95.9%  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 UI ìš”ì†Œ

| ìš”ì†Œ | ì„¤ëª… |
|------|------|
| ê¸°ê°„ íƒ­ | ì¼ê°„/ì£¼ê°„/ì›”ê°„ ì„ íƒ |
| ì–¸ì–´ í•„í„° | í•œê¸€(ko)/ì˜ì–´(en) ì„ íƒ |
| Top ë­í‚¹ ë¦¬ìŠ¤íŠ¸ | 1~100ìœ„ ìŠ¤í¬ë¡¤ ë¦¬ìŠ¤íŠ¸ |
| ìˆœìœ„ ì¹´ë“œ | ìˆœìœ„, ë‹‰ë„¤ì„, WPM, ì •í™•ë„, ì„¸ì…˜ ìˆ˜ |
| ë‚´ ìˆœìœ„ íŒ¨ë„ | ë¡œê·¸ì¸ ì‹œ í‘œì‹œ, ì£¼ë³€ Â±2ìœ„ í•¨ê»˜ í‘œì‹œ |
| ê¸°ê°„ í‘œì‹œ | "2026.01.20 ~ 2026.01.26" í˜•íƒœ |

### 2.3 HomePage ìœ„ì ¯ (ì„ íƒ)

| ìš”ì†Œ | ì„¤ëª… |
|------|------|
| ë­í‚¹ ë¯¸ë¦¬ë³´ê¸° | Top 3 + ë‚´ ìˆœìœ„ ì¹´ë“œ í‘œì‹œ |
| ë°”ë¡œê°€ê¸° | "ì „ì²´ ë³´ê¸°" â†’ LeaderboardPage |

---

## 3) ë°ì´í„°/í…Œì´ë¸” ì˜í–¥

### 3.1 í•„ìš” í…Œì´ë¸”

| í…Œì´ë¸” | ì„¤ëª… | ìƒíƒœ |
|--------|------|------|
| `leaderboard_snapshot` | ë­í‚¹ ìŠ¤ëƒ…ìƒ· ë©”íƒ€ | ì •ì˜ì„œ í¬í•¨ âœ… |
| `leaderboard_entry` | ë­í‚¹ ì—”íŠ¸ë¦¬ (ìˆœìœ„ë³„) | ì •ì˜ì„œ í¬í•¨ âœ… |

### 3.2 í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ (ì¬í™•ì¸)

#### `leaderboard_snapshot`
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | bigint/uuid | PK |
| period | varchar(10) | `daily`, `weekly`, `monthly` |
| start_date | date | ê¸°ê°„ ì‹œì‘ |
| end_date | date | ê¸°ê°„ ë |
| mode | varchar(20) | `ranked` (ë˜ëŠ” `practice`) |
| language | varchar(10) | `ko`, `en` |
| generated_at | timestamptz | ìƒì„± ì‹œê° |

#### `leaderboard_entry`
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | bigint/uuid | PK |
| snapshot_id | FK | ìŠ¤ëƒ…ìƒ· ì°¸ì¡° |
| user_id | FK | ì‚¬ìš©ì ì°¸ì¡° |
| rank | int | ìˆœìœ„ |
| score_wpm | numeric(6,2) | ê¸°ì¤€ WPM |
| score_accuracy | numeric(5,2) | ì •í™•ë„ |
| session_count | int | ê¸°ê°„ ë‚´ ì„¸ì…˜ ìˆ˜ |

### 3.3 ì§‘ê³„ ë¡œì§

**ì£¼ê°„ ë­í‚¹ ì§‘ê³„ ì¿¼ë¦¬ (ì˜ˆì‹œ)**
```sql
SELECT 
  user_id,
  AVG(wpm) as avg_wpm,
  AVG(accuracy) as avg_accuracy,
  COUNT(*) as session_count
FROM sessions_typing_session
WHERE 
  language = 'ko'
  AND started_at >= '2026-01-20'
  AND started_at < '2026-01-27'
  AND mode IN ('practice', 'ranked')
GROUP BY user_id
HAVING COUNT(*) >= 5  -- ìµœì†Œ 5íšŒ ì°¸ì—¬
ORDER BY avg_wpm DESC
LIMIT 100;
```

### 3.4 ìŠ¤ëƒ…ìƒ· ìƒì„± ì •ì±…

| í•­ëª© | ì •ì±… |
|------|------|
| ìƒì„± ì£¼ê¸° | ì¼ê°„: ë§¤ì¼ 00:00, ì£¼ê°„: ì›”ìš”ì¼ 00:00 |
| ìµœì†Œ ì°¸ì—¬ | 5íšŒ ì´ìƒ ì—°ìŠµ ì‹œ ë­í‚¹ ë°˜ì˜ |
| ë³´ê´€ ê¸°ê°„ | ìµœê·¼ 12ì£¼ (3ê°œì›”) |
| ë°°ì¹˜ ì‹¤í–‰ | Django management command ë˜ëŠ” Celery beat |

---

## 4) API ì˜í–¥

### 4.1 ì‹ ê·œ ì—”ë“œí¬ì¸íŠ¸

| Method | Endpoint | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|--------|----------|------|----------|
| GET | `/api/leaderboard` | ë­í‚¹ ëª©ë¡ | **Next** |
| GET | `/api/leaderboard/me` | ë‚´ ìˆœìœ„ + ì£¼ë³€ | **Next** |

### 4.2 Request/Response ì˜ˆì‹œ

#### GET /api/leaderboard

**Request**
```
GET /api/leaderboard?period=weekly&lang=ko&limit=100
```

**Response**
```json
{
  "snapshot": {
    "id": 123,
    "period": "weekly",
    "start_date": "2026-01-20",
    "end_date": "2026-01-26",
    "language": "ko",
    "generated_at": "2026-01-27T00:05:00Z"
  },
  "entries": [
    {
      "rank": 1,
      "user": {"id": 1, "username": "user_123"},
      "score_wpm": 456.70,
      "score_accuracy": 99.20,
      "session_count": 45
    },
    {
      "rank": 2,
      "user": {"id": 2, "username": "speed_master"},
      "score_wpm": 445.30,
      "score_accuracy": 98.80,
      "session_count": 38
    }
  ],
  "total_participants": 1523
}
```

#### GET /api/leaderboard/me

**Request**
```
GET /api/leaderboard/me?period=weekly&lang=ko
```

**Response**
```json
{
  "my_rank": 42,
  "my_entry": {
    "rank": 42,
    "score_wpm": 312.50,
    "score_accuracy": 96.30,
    "session_count": 12
  },
  "nearby": [
    {"rank": 40, "user": {"username": "nearby_user1"}, "score_wpm": 315.20},
    {"rank": 41, "user": {"username": "nearby_user2"}, "score_wpm": 313.80},
    {"rank": 43, "user": {"username": "nearby_user3"}, "score_wpm": 310.20}
  ]
}
```

---

## 5) êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Next (Phase B) â€” 3~4ì¼

| # | í•­ëª© | ì˜ˆìƒ ê³µìˆ˜ |
|---|------|----------|
| 1 | `leaderboard` ì•± ìƒì„± (Django) | 2h |
| 2 | ëª¨ë¸/ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš© | 2h |
| 3 | ìŠ¤ëƒ…ìƒ· ìƒì„± ê´€ë¦¬ ì»¤ë§¨ë“œ | 4h |
| 4 | API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ | 4h |
| 5 | LeaderboardPage (Frontend) | 6h |
| 6 | HomePage ë­í‚¹ ìœ„ì ¯ | 2h |
| 7 | Celery beat ìŠ¤ì¼€ì¤„ë§ (ì„ íƒ) | 2h |

**ì´ ì˜ˆìƒ**: 22h (ì•½ 3ì¼)

### Later (Phase C)

| # | í•­ëª© |
|---|------|
| 1 | ì›”ê°„ ë­í‚¹ ì¶”ê°€ |
| 2 | ë­í‚¹ ì§„ì… ì•Œë¦¼ (í‘¸ì‹œ/ì¸ì•±) |
| 3 | ë­í‚¹ ë°°ì§€ ì—°ë™ |

---

## 6) ì—£ì§€ ì¼€ì´ìŠ¤ / ì‹¤íŒ¨ ì²˜ë¦¬

### 6.1 ìŠ¤ëƒ…ìƒ· ê´€ë ¨

| ìƒí™© | ì²˜ë¦¬ |
|------|------|
| ìŠ¤ëƒ…ìƒ· ë¯¸ìƒì„± | "ë­í‚¹ ì§‘ê³„ ì¤‘..." ë©”ì‹œì§€ í‘œì‹œ |
| ì°¸ì—¬ì ë¶€ì¡± | "ì•„ì§ ì°¸ì—¬ìê°€ ë¶€ì¡±í•©ë‹ˆë‹¤" í‘œì‹œ |
| ë°°ì¹˜ ì‹¤íŒ¨ | ì´ì „ ìŠ¤ëƒ…ìƒ· ìœ ì§€ + ì•Œë¦¼ |

### 6.2 ì‚¬ìš©ì ê´€ë ¨

| ìƒí™© | ì²˜ë¦¬ |
|------|------|
| ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì | "ë‚´ ìˆœìœ„" íŒ¨ë„ ìˆ¨ê¹€, ë­í‚¹ ëª©ë¡ë§Œ í‘œì‹œ |
| ìµœì†Œ ì°¸ì—¬ ë¯¸ë‹¬ | "5íšŒ ì´ìƒ ì—°ìŠµí•˜ë©´ ë­í‚¹ì— ë°˜ì˜ë©ë‹ˆë‹¤" ì•ˆë‚´ |
| íƒˆí‡´ ì‚¬ìš©ì | ì—”íŠ¸ë¦¬ ìœ ì§€, username "íƒˆí‡´ ì‚¬ìš©ì" í‘œì‹œ |

### 6.3 ì„±ëŠ¥ ê´€ë ¨

| ìƒí™© | ì²˜ë¦¬ |
|------|------|
| ëŒ€ëŸ‰ ì¡°íšŒ | ìŠ¤ëƒ…ìƒ· í…Œì´ë¸” ì¡°íšŒ (ì„¸ì…˜ ì§ì ‘ ì§‘ê³„ X) |
| í˜ì´ì§€ë„¤ì´ì…˜ | 100ìœ„ ë‹¨ìœ„ í˜ì´ì§• ì§€ì› |

---

## 7) ìˆ˜ìš© ê¸°ì¤€ (Acceptance Criteria)

### 7.1 LeaderboardPage

- [ ] ì¼ê°„/ì£¼ê°„/ì›”ê°„ íƒ­ ì „í™˜ ê°€ëŠ¥
- [ ] í•œê¸€/ì˜ì–´ í•„í„° ì „í™˜ ê°€ëŠ¥
- [ ] Top 100 ë­í‚¹ ëª©ë¡ í‘œì‹œ
- [ ] 1~3ìœ„ ë©”ë‹¬ ì•„ì´ì½˜ í‘œì‹œ

### 7.2 ë‚´ ìˆœìœ„ íŒ¨ë„

- [ ] ë¡œê·¸ì¸ ì‚¬ìš©ìì—ê²Œë§Œ í‘œì‹œ
- [ ] ë‚´ ìˆœìœ„ + ì£¼ë³€ Â±2ìœ„ í‘œì‹œ
- [ ] ë­í‚¹ ì™¸ ì‚¬ìš©ìì—ê²Œ "ìµœì†Œ ì°¸ì—¬" ì•ˆë‚´

### 7.3 ìŠ¤ëƒ…ìƒ· ìƒì„±

- [ ] ì£¼ê°„ ìŠ¤ëƒ…ìƒ· ë§¤ì£¼ ì›”ìš”ì¼ 00:00 (KST) ìƒì„±
- [ ] ìµœì†Œ 5íšŒ ì°¸ì—¬ ì¡°ê±´ ì ìš©
- [ ] ìƒì„± ì™„ë£Œ ë¡œê·¸ ê¸°ë¡

### 7.4 API ì‘ë‹µ

- [ ] `/api/leaderboard`ì—ì„œ ìŠ¤ëƒ…ìƒ· + ì—”íŠ¸ë¦¬ ë°˜í™˜
- [ ] `/api/leaderboard/me`ì—ì„œ ë‚´ ìˆœìœ„ + nearby ë°˜í™˜
- [ ] ë¹„ë¡œê·¸ì¸ ì‹œ `/api/leaderboard/me` â†’ 401

### 7.5 ë°ì´í„° ì •í•©ì„±

- [ ] ë™ì¼ ìŠ¤ëƒ…ìƒ· ë‚´ rank ì¤‘ë³µ ì—†ìŒ
- [ ] ë™ì¼ ìŠ¤ëƒ…ìƒ· ë‚´ user_id ì¤‘ë³µ ì—†ìŒ
- [ ] WPM ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬

---

## ê´€ë ¨ ë¬¸ì„œ

- [í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„°](../PROJECT_MASTER.md): ì „ì²´ í˜„í™©
- [DB ìŠ¤í‚¤ë§ˆ](../db/SCHEMA.md): í…Œì´ë¸” ì •ì˜ (SoT)
- [ì¶”ì²œ ê¸°ëŠ¥ ë¡œë“œë§µ](../roadmap/RECOMMENDED_FEATURES.md): Phase 1~3 ë¡œë“œë§µ
